<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Tetris PWA</title>

  <!-- Manifest & favicon: le icone sono file PNG ESTERNI in ./assets/icons/ (non inline) -->
  <link rel="manifest" href="./manifest.webmanifest" type="application/manifest+json">
  <link rel="icon" type="image/png" sizes="16x16" href="./assets/icons/favicon-16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./assets/icons/favicon-32.png">
  <link rel="apple-touch-icon" href="./assets/icons/apple-touch-icon-180.png">
  <meta name="theme-color" content="#0e1116" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <link rel="stylesheet" href="./styles/styles.css">
</head>
<body>
  <!-- Schermata iniziale / Menu -->
  <header class="app-header" role="banner" aria-label="Intestazione app">
    <h1 class="app-title">Tetris</h1>
    <nav class="command-menu" aria-label="Comandi da tastiera">
      <h2>Comandi</h2>
      <ul>
        <li><span class="keycap">← / →</span><span>Sposta i blocchi</span></li>
        <li><span class="keycap">↑ o X</span><span>Ruota a destra</span></li>
        <li><span class="keycap">Z</span><span>Ruota a sinistra</span></li>
        <li><span class="keycap">↓</span><span>Soft drop</span></li>
        <li><span class="keycap">Spazio</span><span>Hard drop</span></li>
        <li><span class="keycap">C</span><span>Hold</span></li>
        <li><span class="keycap">P</span><span>Pausa / Riprendi</span></li>
        <li><span class="keycap">M</span><span>Muto</span></li>
      </ul>
    </nav>
  </header>

  <main class="app-main" role="main">
    <aside class="hud hud-left" aria-label="Statistiche partita">
      <section>
        <h2>Score</h2>
        <div id="score" class="hud-val" aria-live="polite">0</div>
      </section>
      <section>
        <h2>Level</h2>
        <div id="level" class="hud-val" aria-live="polite">1</div>
      </section>
      <section>
        <h2>Lines</h2>
        <div id="lines" class="hud-val" aria-live="polite">0</div>
      </section>
    </aside>

    <div class="stage-column" aria-live="off">
      <div class="stage-wrap">
        <canvas id="game" width="360" height="640" aria-label="Area di gioco Tetris" role="img"></canvas>
      </div>
      <div class="stage-footer" aria-label="Controlli rapidi">
        <div class="stage-timer">
          <h2>Timer</h2>
          <div id="timer" class="hud-val">00:00</div>
        </div>
        <button id="btnPauseGame" class="btn primary" type="button">Pausa (P)</button>
      </div>
    </div>

    <aside class="hud hud-right" aria-label="Preview tetramini">
      <section>
        <h2>Next</h2>
        <canvas id="next" width="120" height="80" class="mini"></canvas>
      </section>
      <section>
        <h2>Hold</h2>
        <canvas id="hold" width="120" height="80" class="mini"></canvas>
      </section>
    </aside>

  </main>

  <div class="panel-wrap">
    <div id="panelHome" class="panel show" role="dialog" aria-modal="true" aria-labelledby="homeTitle">
      <h2 id="homeTitle">Tetris</h2>
      <div class="panel-content">
        <button id="btnPlay" class="btn primary">Gioca</button>
        <button id="btnResume" class="btn" hidden>Riprendi</button>
        <button id="btnSettings" class="btn">Impostazioni</button>
      </div>
    </div>

    <div id="panelPause" class="panel" role="dialog" aria-modal="true" aria-labelledby="pauseTitle">
      <h2 id="pauseTitle">Pausa</h2>
      <div class="panel-content">
        <button id="btnResume2" class="btn primary">Riprendi</button>
        <button id="btnRestart" class="btn">Nuova partita</button>
        <button id="btnSettings2" class="btn">Impostazioni</button>
        <button id="btnMute" class="btn">Mute</button>
        <button id="btnHome" class="btn ghost">Home</button>
      </div>
    </div>

    <div id="panelGameOver" class="panel" role="dialog" aria-modal="true" aria-labelledby="overTitle">
      <h2 id="overTitle">Game Over</h2>
      <p id="overSummary"></p>
      <div class="panel-content">
        <button id="btnAgain" class="btn primary">Gioca di nuovo</button>
        <button id="btnHome2" class="btn ghost">Home</button>
      </div>
    </div>

    <div id="panelSettings" class="panel" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
      <h2 id="settingsTitle">Impostazioni</h2>
      <div class="grid2">
        <label>Musica
          <select id="selMusic" aria-label="Traccia musicale">
            <option value="0">Traccia 1</option>
            <option value="1">Traccia 2</option>
            <option value="2">Traccia 3</option>
            <option value="3">Traccia 4</option>
            <option value="4">Traccia 5</option>
          </select>
        </label>
        <label>Volume Musica
          <input id="volMusic" type="range" min="0" max="1" step="0.01" value="0.6">
        </label>
        <label>Volume FX
          <input id="volFx" type="range" min="0" max="1" step="0.01" value="0.8">
        </label>
        <label>Mostra FPS
          <input id="chkFps" type="checkbox">
        </label>
        <label>Tema
          <select id="selTheme">
            <option value="auto">Automatico</option>
            <option value="dark">Scuro</option>
            <option value="light">Chiaro</option>
          </select>
        </label>
      </div>
      <div class="panel-actions">
        <button id="btnCloseSettings" class="btn primary">Chiudi</button>
      </div>
    </div>
  </div>

  <footer class="app-footer" role="contentinfo">
    <span>© Tetris PWA – HTML5</span>
  </footer>

  <script type="module" src="./src/main.js"></script>
</body>
</html>
